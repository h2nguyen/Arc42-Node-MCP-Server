{
  "id": "snapshot_1770927774294_wl738wl3z",
  "approvalId": "approval_1770927774288_4pwks5nio",
  "approvalTitle": "Requirements: Multi-Language Template Support",
  "version": 1,
  "timestamp": "2026-02-12T20:22:54.294Z",
  "trigger": "initial",
  "status": "pending",
  "content": "# Requirements Document: Multi-Language Template Support\n\n## Introduction\n\nThis feature adds multi-language support to the Arc42 Node MCP Server, enabling users to generate and manage architecture documentation in languages other than English. The initial implementation will support German (DE), French (FR), and Spanish (ES) templates, with an extensible architecture for adding more languages in the future.\n\nThis addresses a key limitation in the current system where only English templates are available, making the tool less accessible to non-English speaking teams and organizations that prefer documentation in their native language.\n\n## Alignment with Product Vision\n\nFrom **product.md**, the key alignments are:\n\n1. **Accessibility Goal**: \"Make arc42 methodology accessible to teams who may not have formal architecture training\" - Multi-language support extends this accessibility to non-English speakers\n2. **Community Goal**: \"Build an open-source community around AI-assisted documentation practices\" - Supporting multiple languages enables global community participation\n3. **Future Vision Enhancement**: \"Multi-Language Support\" is explicitly listed as a potential enhancement\n4. **AI-First Design Principle**: Templates must remain AI-friendly with clear guidance text in each language\n\n## Requirements\n\n### Requirement 1: Language Selection for arc42-init\n\n**User Story:** As a developer, I want to initialize arc42 documentation in my preferred language, so that I can create architecture documentation that my non-English speaking team members can read and contribute to.\n\n#### Acceptance Criteria\n\n1. WHEN arc42-init is called with a `language` parameter THEN the system SHALL create templates in the specified language\n2. IF language parameter is \"de\" THEN the system SHALL generate German templates with German section titles and guidance text\n3. IF language parameter is \"fr\" THEN the system SHALL generate French templates with French section titles and guidance text\n4. IF language parameter is \"es\" THEN the system SHALL generate Spanish templates with Spanish section titles and guidance text\n5. IF language parameter is not provided THEN the system SHALL default to English (\"en\") templates\n6. IF language parameter contains an unsupported language code THEN the system SHALL return an error listing available languages\n\n### Requirement 2: Language-Aware Template Generation\n\n**User Story:** As an AI assistant, I want to generate section templates in the user's preferred language, so that I can provide context-appropriate guidance for documentation in any supported language.\n\n#### Acceptance Criteria\n\n1. WHEN generate-template is called THEN the system SHALL check the project's configured language from config.yaml\n2. IF project has a configured language THEN the system SHALL return the template in that language\n3. IF a `language` parameter is provided THEN the system SHALL use it to override the project's configured language\n4. WHEN generating templates THEN the system SHALL include AI guidance text translated to the target language\n5. WHEN generating templates THEN the system SHALL preserve the arc42 section structure across all languages\n\n### Requirement 3: Language Configuration Persistence\n\n**User Story:** As a user, I want my language preference to be saved in the project configuration, so that I don't have to specify the language for every operation.\n\n#### Acceptance Criteria\n\n1. WHEN arc42-init creates a new workspace THEN the system SHALL save the language setting in config.yaml\n2. WHEN config.yaml exists with a language setting THEN all tools SHALL read and respect this setting\n3. IF config.yaml language differs from tool parameter THEN the tool parameter SHALL take precedence\n4. WHEN arc42-status is called THEN the system SHALL display the project's configured language\n\n### Requirement 4: Translation of Section Titles and Metadata\n\n**User Story:** As a user reading documentation in my native language, I want section titles, headings, and structural elements to be in my language, so that the documentation is fully localized.\n\n#### Acceptance Criteria\n\n1. WHEN creating section files THEN the system SHALL use translated section titles (e.g., \"Einf√ºhrung und Ziele\" for German)\n2. WHEN updating SECTION_METADATA THEN the system SHALL provide translated titles and descriptions for each language\n3. IF section file references other sections THEN the system SHALL use localized section names\n\n### Requirement 5: Mixed Language Support (Optional Override)\n\n**User Story:** As a developer working with an international team, I want to be able to override the language for specific operations, so that I can accommodate mixed-language documentation needs.\n\n#### Acceptance Criteria\n\n1. WHEN update-section is called with a `language` parameter THEN the system SHALL apply templates in that language regardless of project config\n2. WHEN get-section is called THEN the system SHALL return content as stored (original language) without translation\n3. IF user requests template in a different language than stored content THEN the system SHALL generate the template in the requested language\n\n## Non-Functional Requirements\n\n### Code Architecture and Modularity\n\n- **Single Responsibility Principle**: Language-specific templates SHALL be stored in separate modules by language code\n- **Modular Design**: A new `src/templates/locales/` directory SHALL contain language-specific template content\n- **Dependency Management**: Language packs SHALL be lazy-loaded to minimize startup overhead\n- **Clear Interfaces**: A `LanguageProvider` interface SHALL abstract language-specific operations\n- **Extensibility**: Adding a new language SHALL require only adding new template files without core code changes\n\n### Performance\n\n- Template loading SHALL complete within 100ms regardless of selected language\n- Language detection and configuration reading SHALL not add perceptible latency\n- Total arc42-init time SHALL remain under 2 seconds with any language\n\n### Security\n\n- Language codes SHALL be validated against a whitelist of supported languages\n- Template content SHALL not include executable code or user-controllable paths\n- Input validation SHALL prevent directory traversal via malicious language codes\n\n### Reliability\n\n- Missing translations SHALL gracefully fall back to English with a warning\n- Corrupted or partial language files SHALL not crash the server\n- All existing tests SHALL pass with any supported language\n\n### Usability\n\n- Available languages SHALL be discoverable via arc42-workflow-guide\n- Error messages for unsupported languages SHALL suggest valid alternatives\n- Language codes SHALL follow ISO 639-1 standard (2-letter codes)\n\n## Supported Languages (Initial Release)\n\n| Code | Language | Status |\n|------|----------|--------|\n| en | English | Default (existing) |\n| de | German | New |\n| fr | French | New |\n| es | Spanish | New |\n\n## Out of Scope\n\n- Automatic translation of existing documentation\n- Runtime language switching within a project\n- Right-to-left (RTL) language support\n- Language detection from system locale\n",
  "fileStats": {
    "size": 7115,
    "lines": 125,
    "lastModified": "2026-02-12T20:22:44.519Z"
  },
  "comments": []
}