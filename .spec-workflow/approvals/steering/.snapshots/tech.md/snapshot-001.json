{
  "id": "snapshot_1770927271408_5b4736h8a",
  "approvalId": "approval_1770927271402_i4ba7lb37",
  "approvalTitle": "Technology Stack - Arc42 Node MCP Server",
  "version": 1,
  "timestamp": "2026-02-12T20:14:31.408Z",
  "trigger": "initial",
  "status": "pending",
  "content": "# Technology Stack\n\n## Project Type\nMCP Server (Model Context Protocol) - A Node.js CLI tool that implements the MCP specification to enable AI assistants to create and manage arc42 architecture documentation.\n\n## Core Technologies\n\n### Primary Language(s)\n- **Language**: TypeScript 5.7\n- **Runtime**: Node.js >= 24.0.0\n- **Module System**: ES Modules (ESM) with Node16 module resolution\n- **Build Target**: ES2022\n\n### Key Dependencies/Libraries\n\n#### Runtime Dependencies\n- **@modelcontextprotocol/sdk ^1.24.3**: Official MCP SDK for building MCP servers, provides server implementation, transport protocols, and type definitions\n- **zod ^3.25.36**: Runtime schema validation for tool input parameters\n- **gray-matter ^4.0.3**: YAML front matter parsing for Markdown files\n- **yaml ^2.3.4**: YAML configuration file parsing and serialization\n- **chokidar ^3.5.3**: File system watcher (for potential future live-reload features)\n\n#### Development Dependencies\n- **typescript ^5.7.2**: TypeScript compiler\n- **tsx ^4.7.0**: TypeScript execution for development and scripts\n- **vitest ^4.0.15**: Test framework (Vite-based)\n- **@vitest/coverage-v8 ^4.0.15**: Code coverage via V8\n- **rimraf ^6.0.1**: Cross-platform file deletion\n\n### Application Architecture\nThe project follows a **tool-based plugin architecture** where each MCP tool is implemented as a separate handler module. The main components are:\n\n1. **MCP Server (Arc42MCPServer class)**: Central coordinator that:\n   - Registers tools with the MCP SDK\n   - Manages stdio transport for communication with AI clients\n   - Handles lifecycle (initialization, graceful shutdown)\n\n2. **Tool Handlers**: Individual modules for each arc42 operation:\n   - `arc42-workflow-guide`: Documentation workflow guidance\n   - `arc42-init`: Workspace initialization\n   - `arc42-status`: Progress tracking\n   - `generate-template`: Section template generation\n   - `update-section`: Content updates\n   - `get-section`: Content retrieval\n\n3. **Templates**: Static arc42 templates stored as TypeScript modules with reference content\n\n4. **Types System**: Centralized type definitions for arc42 sections, responses, and contexts\n\n### Data Storage\n- **Primary storage**: File system (Markdown files)\n- **Configuration**: YAML files (`config.yaml`)\n- **Data formats**: \n  - Markdown for documentation content\n  - JSON for MCP protocol messages\n  - YAML for configuration and front matter\n\n### External Integrations\n- **Protocols**: MCP (Model Context Protocol) over STDIO\n- **Client Communication**: JSON-RPC 2.0 via stdio streams\n- **No authentication required**: Runs locally, trusts the host environment\n\n## Development Environment\n\n### Build & Development Tools\n- **Build System**: npm scripts + TypeScript compiler\n- **Package Management**: npm with package-lock.json\n- **Key Commands**:\n  - `npm run build`: Clean build with TypeScript compilation\n  - `npm run dev`: Development mode with tsx\n  - `npm test`: Run test suite\n  - `npm run test:coverage`: Coverage report\n\n### Code Quality Tools\n- **Type Checking**: TypeScript strict mode with comprehensive checks:\n  - `strict: true`\n  - `noUnusedLocals`, `noUnusedParameters`\n  - `noImplicitReturns`, `noFallthroughCasesInSwitch`\n- **Testing Framework**: Vitest with V8 coverage\n- **Coverage Thresholds**:\n  - Statements: 70%\n  - Branches: 60%\n  - Functions: 70%\n  - Lines: 70%\n\n### Version Control & Collaboration\n- **VCS**: Git with GitHub\n- **Submodules**: arc42 template from official repository (`vendor/arc42-template`)\n- **Branching Strategy**: GitHub Flow (main + feature branches)\n- **CI/CD**: GitHub Actions for lint, test, and Docker builds\n\n## Deployment & Distribution\n\n### Target Platform(s)\n- **Primary**: Local development environments\n- **Supported OS**: macOS, Linux, Windows\n- **Runs with**: Claude Desktop, Cursor, Cline, and other MCP-compatible tools\n\n### Distribution Method\n- **NPM Package**: `@h2nguyen/arc42-node-mcp-server`\n- **NPX Support**: `npx -y @h2nguyen/arc42-node-mcp-server`\n- **Docker**: Available via Dockerfile and docker-compose\n\n### Installation Requirements\n- Node.js >= 24.0.0\n- npm for package management\n- MCP-compatible AI client (Claude, Cursor, Cline)\n\n### Update Mechanism\n- npm package versioning with semver\n- GitHub Releases for release notes\n\n## Technical Requirements & Constraints\n\n### Performance Requirements\n- Fast tool response times (< 1 second for all operations)\n- Minimal memory footprint for long-running MCP sessions\n- Efficient file system operations for documentation management\n\n### Compatibility Requirements\n- **Platform Support**: Cross-platform (macOS, Linux, Windows)\n- **Node.js**: >= 24.0.0 (using modern ESM features)\n- **MCP Protocol**: Compatible with MCP SDK 1.24+\n\n### Security & Compliance\n- Runs locally with user file system permissions\n- No network requests or external data transmission\n- Documentation stored in plain text (auditable, versionable)\n\n## Technical Decisions & Rationale\n\n### Decision Log\n\n1. **TypeScript over JavaScript**: Chosen for type safety, better IDE support, and maintainability in a tool that generates structured content\n   \n2. **ES Modules over CommonJS**: Modern module system aligns with Node.js direction, enables better tree-shaking and static analysis\n\n3. **Zod for Schema Validation**: Provides runtime validation with TypeScript type inference, ensuring tool inputs match expected schemas\n\n4. **File-based Documentation**: Markdown files enable version control, diff-friendly content, and platform independence vs database storage\n\n5. **STDIO Transport**: Standard MCP transport mechanism, enables simple integration with any MCP client without networking complexity\n\n6. **Vitest over Jest**: Faster execution, native ESM support, simpler configuration for TypeScript projects\n\n## Known Limitations\n\n- **Node.js 24+ requirement**: Limits usage to environments with latest Node.js (needed for native ESM features)\n- **Single-user design**: No built-in multi-user collaboration or conflict resolution\n- **No diagram rendering**: Mermaid/PlantUML diagrams stored as text, rendering left to documentation viewers\n- **English-only templates**: Arc42 templates currently only in English (multi-language is a future enhancement)\n",
  "fileStats": {
    "size": 6235,
    "lines": 152,
    "lastModified": "2026-02-12T20:14:21.314Z"
  },
  "comments": []
}